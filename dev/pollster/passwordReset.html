<!DOCTYPE html>
<html lang=en>

<head>
    <title>Password Reset</title>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="../CSS/styles.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="../scripts/utils.js"></script>
    <script>
        $(function () {
            $("#header").load("../header.html");
        });
    </script>
</head>

<body>
    <div id="header"></div>
    <div class="form-centered">
        <legend class="legend">Password Reset</legend>
        </br>
        <!--Get token from query string before displaying pword reset. Maybe gray out form fields if not valid or not matching?
            Check token for validity (regex), then query tokens table. Check access time against expiration time. 
            If ok, get acctName. Display acctName (username).-->
        <p>
            <h2>Enter new password: </h2>
        </p>
        <!--Input password twice. Make sure they match. Update account: prepare(), then INSERT INTO accounts... 
            Then display "password successfully changed. -->

            <form id="pwdResetForm" action="passwordReset.php" method="post">    

            <script>        
                $("#pwdResetForm").prepend('<input value=' + getUrlParameter('token') + ' type="hidden" name="token">');
            </script>
            
            <!-- 'token' is now stored correctly in the js variable. The following code prints the token correctly.
             FOR TESTING: -->
            <!--
            <p>The value of 'token' is: </p>

            <script type= "text/javascript">
            document.write(token)
            </script> -->     

            <input class="form-control input-lg" placeholder="new password" type="password" name="newPassword">
            </br>
            <p>
                <h2>Re-enter new password: </h2>
            </p>

            <input class="form-control input-lg" placeholder="retype password" type="password" name="confirmPassword">
            </br>
            <input class="btn btn-primary btn-lg btn-block" type="submit" value="Submit"></input>

        </form>
        </br>

</body>

</html>